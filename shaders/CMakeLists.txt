file(GLOB_RECURSE GLSL_SHADER_FILES ${CMAKE_CURRENT_SOURCE_DIR}/*.glsl)
file(GLOB_RECURSE HLSL_SHADER_FILES ${CMAKE_CURRENT_SOURCE_DIR}/*.hlsl)

set(SHADERS ${GLSL_SHADER_FILES} ${HLSL_SHADER_FILES})

foreach(SHADER_FILE ${SHADERS})
    file(TO_CMAKE_PATH ${SHADER_FILE} SHADER_FILE)
    file(RELATIVE_PATH SHADER_RELATIVE_PATH ${CMAKE_CURRENT_SOURCE_DIR} ${SHADER_FILE})
    string(REGEX REPLACE "[\\./]" "_" SHADER_NAME ${SHADER_RELATIVE_PATH})
    
    configure_shader(
        NAME ${SHADER_NAME}
        SOURCE ${SHADER_FILE}
        OUTPUT ${SHADER_NAME}.spv
    )
endforeach()